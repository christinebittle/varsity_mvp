@model varsity_w_auth.Models.ViewModels.ShowTeam

@{
    ViewBag.Title = "Details";
}

<h4>Team @Model.team.TeamName</h4>
<div style="overflow:hidden;">
    <div style="float:left; margin-right:2%; width:49%;">

        <nav class="editnav">
            <ul>
                <li>@Html.ActionLink("Back to List", "List")</li>
                @if (Model.isadmin)
                {
                <li>@Html.ActionLink("Delete", "DeleteConfirm", new { id = Model.team.TeamID })</li>
                <li>@Html.ActionLink("Edit", "Edit", new { id = Model.team.TeamID })</li>
                }
            </ul>

        </nav>
        <dl class="dl-horizontal">
            <dt>
                @Html.DisplayNameFor(model => model.team.TeamName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.team.TeamName)
            </dd>

            <dt>
                Sport
            </dt>

            <dd>
                <a href="/Sport/Details/@Model.sport.SportID">@Model.sport.SportName</a>
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.team.TeamBio)
            </dt>

            <dd>
                @{/*Replaced with Raw HTML value*/}
                @Html.Raw(Model.team.TeamBio)
            </dd>

        </dl>
    </div>
    <div style="float:left;margin-right:0%; width:49%; padding-top:20px;">
        <div>
            <h5>Players:</h5>
            <div class="sublist">
                @foreach (var player in Model.teamplayers)
                {
                    <div class="listitem">
                        @Html.ActionLink(
                        player.PlayerFirstName + " " + player.PlayerLastName,
                        "Details",
                        "Player",
                        new { id = player.PlayerID },
                        new { })
                    </div>
                }
            </div>
        </div>
        <div>
            <h5>Sponsors:</h5>
            <div class="sublist">
                @foreach (var sponsor in Model.teamsponsors)
                {
                    <div class="listitem">
                        @Html.ActionLink(
                        sponsor.SponsorName,
                        "Details",
                        "Sponsor",
                        new { id = sponsor.SponsorID },
                        new { })
                    </div>
                }
            </div>
        </div>
    </div>
    <div style="clear:both;"></div>
</div>
<div style="padding-top:60px; width:50%; margin: 0 auto;">
    <h4>Fans of @Model.team.TeamName</h4>
    @foreach (var support in Model.supportmessages)
    {

        <div class="supportmessage">
            @{ 
                //Use Developer tools to inspect the HTML of the links generated by razor syntax
            }
            <nav class="linknav" style="margin-bottom:10px;">
                written by @support.UserName on @support.DSupportDate
                
                @if(Model.isadmin || (Model.userid == support.Id && Model.isfan)) { 
                    //Conditional logic to render the delete link.
                    //Admin can delete, or the owner of the resource.
                    <span class="editlink">
                        @Html.ActionLink(
                        "[x]",
                        "DeleteSupport",
                        "Team",
                        new { supportid = support.SupportID, teamid = Model.team.TeamID },
                        new { @class = "text-danger" })
                    </span>
                 }
            </nav>
            @support.SupportMessage
        </div>
    }
    <div>
        @if (Model.isfan || Model.isadmin) { 
        <form method="POST" action="/Team/AddSupport/@Model.team.TeamID">
            <div>
                <textarea style="border:1px solid #0094ff; border-radius:3px; padding:5px;" name="message"></textarea>
            </div>
            <div>
                <input type="submit" value="Add Support!" />
            </div>
        </form>
        }
    </div>
</div>

